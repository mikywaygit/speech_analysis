/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(n,r)=>{for(var e in r)t.o(r,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:r[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{add:()=>Q,adjoint:()=>M,clone:()=>u,copy:()=>s,create:()=>i,determinant:()=>v,equals:()=>tt,exactEquals:()=>$,frob:()=>X,fromQuat:()=>q,fromQuat2:()=>T,fromRotation:()=>S,fromRotationTranslation:()=>I,fromRotationTranslationScale:()=>O,fromRotationTranslationScaleOrigin:()=>U,fromScaling:()=>L,fromTranslation:()=>E,fromValues:()=>c,fromXRotation:()=>A,fromYRotation:()=>P,fromZRotation:()=>R,frustum:()=>z,getRotation:()=>D,getScaling:()=>F,getTranslation:()=>_,identity:()=>h,invert:()=>d,lookAt:()=>V,mul:()=>nt,multiply:()=>g,multiplyScalar:()=>K,multiplyScalarAndAdd:()=>J,ortho:()=>k,orthoNO:()=>C,orthoZO:()=>H,perspective:()=>j,perspectiveFromFieldOfView:()=>B,perspectiveNO:()=>N,perspectiveZO:()=>G,rotate:()=>m,rotateX:()=>b,rotateY:()=>y,rotateZ:()=>x,scale:()=>p,set:()=>l,str:()=>W,sub:()=>rt,subtract:()=>Z,targetTo:()=>Y,translate:()=>w,transpose:()=>f});var r={};t.r(r),t.d(r,{add:()=>Nt,calculateW:()=>gt,clone:()=>Ot,conjugate:()=>Et,copy:()=>qt,create:()=>ut,dot:()=>Bt,equals:()=>Qt,exactEquals:()=>Xt,exp:()=>wt,fromEuler:()=>St,fromMat3:()=>Lt,fromValues:()=>Ut,getAngle:()=>ht,getAxisAngle:()=>lt,identity:()=>st,invert:()=>xt,len:()=>Ht,length:()=>kt,lerp:()=>Ct,ln:()=>pt,mul:()=>jt,multiply:()=>ft,normalize:()=>Wt,pow:()=>mt,random:()=>yt,rotateX:()=>dt,rotateY:()=>Mt,rotateZ:()=>vt,rotationTo:()=>Zt,scale:()=>Gt,set:()=>zt,setAxes:()=>Jt,setAxisAngle:()=>ct,slerp:()=>bt,sqlerp:()=>Kt,sqrLen:()=>Yt,squaredLength:()=>Vt,str:()=>At});var e=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;function i(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function u(t){var n=new o(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function s(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function c(t,n,r,e,a,i,u,s,c,l,h,f,d,M,v,g){var w=new o(16);return w[0]=t,w[1]=n,w[2]=r,w[3]=e,w[4]=a,w[5]=i,w[6]=u,w[7]=s,w[8]=c,w[9]=l,w[10]=h,w[11]=f,w[12]=d,w[13]=M,w[14]=v,w[15]=g,w}function l(t,n,r,e,o,a,i,u,s,c,l,h,f,d,M,v,g){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=M,t[14]=v,t[15]=g,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,n){if(t===n){var r=n[1],e=n[2],o=n[3],a=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=a,t[11]=n[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function d(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],s=n[6],c=n[7],l=n[8],h=n[9],f=n[10],d=n[11],M=n[12],v=n[13],g=n[14],w=n[15],p=r*u-e*i,m=r*s-o*i,b=r*c-a*i,y=e*s-o*u,x=e*c-a*u,E=o*c-a*s,L=l*v-h*M,S=l*g-f*M,A=l*w-d*M,P=h*g-f*v,R=h*w-d*v,I=f*w-d*g,T=p*I-m*R+b*P+y*A-x*S+E*L;return T?(T=1/T,t[0]=(u*I-s*R+c*P)*T,t[1]=(o*R-e*I-a*P)*T,t[2]=(v*E-g*x+w*y)*T,t[3]=(f*x-h*E-d*y)*T,t[4]=(s*A-i*I-c*S)*T,t[5]=(r*I-o*A+a*S)*T,t[6]=(g*b-M*E-w*m)*T,t[7]=(l*E-f*b+d*m)*T,t[8]=(i*R-u*A+c*L)*T,t[9]=(e*A-r*R-a*L)*T,t[10]=(M*x-v*b+w*p)*T,t[11]=(h*b-l*x-d*p)*T,t[12]=(u*S-i*P-s*L)*T,t[13]=(r*P-e*S+o*L)*T,t[14]=(v*m-M*y-g*p)*T,t[15]=(l*y-h*m+f*p)*T,t):null}function M(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],s=n[6],c=n[7],l=n[8],h=n[9],f=n[10],d=n[11],M=n[12],v=n[13],g=n[14],w=n[15];return t[0]=u*(f*w-d*g)-h*(s*w-c*g)+v*(s*d-c*f),t[1]=-(e*(f*w-d*g)-h*(o*w-a*g)+v*(o*d-a*f)),t[2]=e*(s*w-c*g)-u*(o*w-a*g)+v*(o*c-a*s),t[3]=-(e*(s*d-c*f)-u*(o*d-a*f)+h*(o*c-a*s)),t[4]=-(i*(f*w-d*g)-l*(s*w-c*g)+M*(s*d-c*f)),t[5]=r*(f*w-d*g)-l*(o*w-a*g)+M*(o*d-a*f),t[6]=-(r*(s*w-c*g)-i*(o*w-a*g)+M*(o*c-a*s)),t[7]=r*(s*d-c*f)-i*(o*d-a*f)+l*(o*c-a*s),t[8]=i*(h*w-d*v)-l*(u*w-c*v)+M*(u*d-c*h),t[9]=-(r*(h*w-d*v)-l*(e*w-a*v)+M*(e*d-a*h)),t[10]=r*(u*w-c*v)-i*(e*w-a*v)+M*(e*c-a*u),t[11]=-(r*(u*d-c*h)-i*(e*d-a*h)+l*(e*c-a*u)),t[12]=-(i*(h*g-f*v)-l*(u*g-s*v)+M*(u*f-s*h)),t[13]=r*(h*g-f*v)-l*(e*g-o*v)+M*(e*f-o*h),t[14]=-(r*(u*g-s*v)-i*(e*g-o*v)+M*(e*s-o*u)),t[15]=r*(u*f-s*h)-i*(e*f-o*h)+l*(e*s-o*u),t}function v(t){var n=t[0],r=t[1],e=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],M=t[13],v=t[14],g=t[15];return(n*i-r*a)*(h*g-f*v)-(n*u-e*a)*(l*g-f*M)+(n*s-o*a)*(l*v-h*M)+(r*u-e*i)*(c*g-f*d)-(r*s-o*i)*(c*v-h*d)+(e*s-o*u)*(c*M-l*d)}function g(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],s=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],M=n[11],v=n[12],g=n[13],w=n[14],p=n[15],m=r[0],b=r[1],y=r[2],x=r[3];return t[0]=m*e+b*u+y*h+x*v,t[1]=m*o+b*s+y*f+x*g,t[2]=m*a+b*c+y*d+x*w,t[3]=m*i+b*l+y*M+x*p,m=r[4],b=r[5],y=r[6],x=r[7],t[4]=m*e+b*u+y*h+x*v,t[5]=m*o+b*s+y*f+x*g,t[6]=m*a+b*c+y*d+x*w,t[7]=m*i+b*l+y*M+x*p,m=r[8],b=r[9],y=r[10],x=r[11],t[8]=m*e+b*u+y*h+x*v,t[9]=m*o+b*s+y*f+x*g,t[10]=m*a+b*c+y*d+x*w,t[11]=m*i+b*l+y*M+x*p,m=r[12],b=r[13],y=r[14],x=r[15],t[12]=m*e+b*u+y*h+x*v,t[13]=m*o+b*s+y*f+x*g,t[14]=m*a+b*c+y*d+x*w,t[15]=m*i+b*l+y*M+x*p,t}function w(t,n,r){var e,o,a,i,u,s,c,l,h,f,d,M,v=r[0],g=r[1],w=r[2];return n===t?(t[12]=n[0]*v+n[4]*g+n[8]*w+n[12],t[13]=n[1]*v+n[5]*g+n[9]*w+n[13],t[14]=n[2]*v+n[6]*g+n[10]*w+n[14],t[15]=n[3]*v+n[7]*g+n[11]*w+n[15]):(e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],s=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],M=n[11],t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=M,t[12]=e*v+u*g+h*w+n[12],t[13]=o*v+s*g+f*w+n[13],t[14]=a*v+c*g+d*w+n[14],t[15]=i*v+l*g+M*w+n[15]),t}function p(t,n,r){var e=r[0],o=r[1],a=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function m(t,n,r,o){var a,i,u,s,c,l,h,f,d,M,v,g,w,p,m,b,y,x,E,L,S,A,P,R,I=o[0],T=o[1],_=o[2],F=Math.hypot(I,T,_);return F<e?null:(I*=F=1/F,T*=F,_*=F,a=Math.sin(r),u=1-(i=Math.cos(r)),s=n[0],c=n[1],l=n[2],h=n[3],f=n[4],d=n[5],M=n[6],v=n[7],g=n[8],w=n[9],p=n[10],m=n[11],b=I*I*u+i,y=T*I*u+_*a,x=_*I*u-T*a,E=I*T*u-_*a,L=T*T*u+i,S=_*T*u+I*a,A=I*_*u+T*a,P=T*_*u-I*a,R=_*_*u+i,t[0]=s*b+f*y+g*x,t[1]=c*b+d*y+w*x,t[2]=l*b+M*y+p*x,t[3]=h*b+v*y+m*x,t[4]=s*E+f*L+g*S,t[5]=c*E+d*L+w*S,t[6]=l*E+M*L+p*S,t[7]=h*E+v*L+m*S,t[8]=s*A+f*P+g*R,t[9]=c*A+d*P+w*R,t[10]=l*A+M*P+p*R,t[11]=h*A+v*P+m*R,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function b(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[4],i=n[5],u=n[6],s=n[7],c=n[8],l=n[9],h=n[10],f=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*o+c*e,t[5]=i*o+l*e,t[6]=u*o+h*e,t[7]=s*o+f*e,t[8]=c*o-a*e,t[9]=l*o-i*e,t[10]=h*o-u*e,t[11]=f*o-s*e,t}function y(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[0],i=n[1],u=n[2],s=n[3],c=n[8],l=n[9],h=n[10],f=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o-c*e,t[1]=i*o-l*e,t[2]=u*o-h*e,t[3]=s*o-f*e,t[8]=a*e+c*o,t[9]=i*e+l*o,t[10]=u*e+h*o,t[11]=s*e+f*o,t}function x(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[0],i=n[1],u=n[2],s=n[3],c=n[4],l=n[5],h=n[6],f=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o+c*e,t[1]=i*o+l*e,t[2]=u*o+h*e,t[3]=s*o+f*e,t[4]=c*o-a*e,t[5]=l*o-i*e,t[6]=h*o-u*e,t[7]=f*o-s*e,t}function E(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function L(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,n,r){var o,a,i,u=r[0],s=r[1],c=r[2],l=Math.hypot(u,s,c);return l<e?null:(u*=l=1/l,s*=l,c*=l,o=Math.sin(n),i=1-(a=Math.cos(n)),t[0]=u*u*i+a,t[1]=s*u*i+c*o,t[2]=c*u*i-s*o,t[3]=0,t[4]=u*s*i-c*o,t[5]=s*s*i+a,t[6]=c*s*i+u*o,t[7]=0,t[8]=u*c*i+s*o,t[9]=s*c*i-u*o,t[10]=c*c*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function A(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=e+e,s=o+o,c=a+a,l=e*u,h=e*s,f=e*c,d=o*s,M=o*c,v=a*c,g=i*u,w=i*s,p=i*c;return t[0]=1-(d+v),t[1]=h+p,t[2]=f-w,t[3]=0,t[4]=h-p,t[5]=1-(l+v),t[6]=M+g,t[7]=0,t[8]=f+w,t[9]=M-g,t[10]=1-(l+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,n){var r=new o(3),e=-n[0],a=-n[1],i=-n[2],u=n[3],s=n[4],c=n[5],l=n[6],h=n[7],f=e*e+a*a+i*i+u*u;return f>0?(r[0]=2*(s*u+h*e+c*i-l*a)/f,r[1]=2*(c*u+h*a+l*e-s*i)/f,r[2]=2*(l*u+h*i+s*a-c*e)/f):(r[0]=2*(s*u+h*e+c*i-l*a),r[1]=2*(c*u+h*a+l*e-s*i),r[2]=2*(l*u+h*i+s*a-c*e)),I(t,n,r),t}function _(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function F(t,n){var r=n[0],e=n[1],o=n[2],a=n[4],i=n[5],u=n[6],s=n[8],c=n[9],l=n[10];return t[0]=Math.hypot(r,e,o),t[1]=Math.hypot(a,i,u),t[2]=Math.hypot(s,c,l),t}function D(t,n){var r=new o(3);F(r,n);var e=1/r[0],a=1/r[1],i=1/r[2],u=n[0]*e,s=n[1]*a,c=n[2]*i,l=n[4]*e,h=n[5]*a,f=n[6]*i,d=n[8]*e,M=n[9]*a,v=n[10]*i,g=u+h+v,w=0;return g>0?(w=2*Math.sqrt(g+1),t[3]=.25*w,t[0]=(f-M)/w,t[1]=(d-c)/w,t[2]=(s-l)/w):u>h&&u>v?(w=2*Math.sqrt(1+u-h-v),t[3]=(f-M)/w,t[0]=.25*w,t[1]=(s+l)/w,t[2]=(d+c)/w):h>v?(w=2*Math.sqrt(1+h-u-v),t[3]=(d-c)/w,t[0]=(s+l)/w,t[1]=.25*w,t[2]=(f+M)/w):(w=2*Math.sqrt(1+v-u-h),t[3]=(s-l)/w,t[0]=(d+c)/w,t[1]=(f+M)/w,t[2]=.25*w),t}function O(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=n[3],s=o+o,c=a+a,l=i+i,h=o*s,f=o*c,d=o*l,M=a*c,v=a*l,g=i*l,w=u*s,p=u*c,m=u*l,b=e[0],y=e[1],x=e[2];return t[0]=(1-(M+g))*b,t[1]=(f+m)*b,t[2]=(d-p)*b,t[3]=0,t[4]=(f-m)*y,t[5]=(1-(h+g))*y,t[6]=(v+w)*y,t[7]=0,t[8]=(d+p)*x,t[9]=(v-w)*x,t[10]=(1-(h+M))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function U(t,n,r,e,o){var a=n[0],i=n[1],u=n[2],s=n[3],c=a+a,l=i+i,h=u+u,f=a*c,d=a*l,M=a*h,v=i*l,g=i*h,w=u*h,p=s*c,m=s*l,b=s*h,y=e[0],x=e[1],E=e[2],L=o[0],S=o[1],A=o[2],P=(1-(v+w))*y,R=(d+b)*y,I=(M-m)*y,T=(d-b)*x,_=(1-(f+w))*x,F=(g+p)*x,D=(M+m)*E,O=(g-p)*E,U=(1-(f+v))*E;return t[0]=P,t[1]=R,t[2]=I,t[3]=0,t[4]=T,t[5]=_,t[6]=F,t[7]=0,t[8]=D,t[9]=O,t[10]=U,t[11]=0,t[12]=r[0]+L-(P*L+T*S+D*A),t[13]=r[1]+S-(R*L+_*S+O*A),t[14]=r[2]+A-(I*L+F*S+U*A),t[15]=1,t}function q(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r+r,u=e+e,s=o+o,c=r*i,l=e*i,h=e*u,f=o*i,d=o*u,M=o*s,v=a*i,g=a*u,w=a*s;return t[0]=1-h-M,t[1]=l+w,t[2]=f-g,t[3]=0,t[4]=l-w,t[5]=1-c-M,t[6]=d+v,t[7]=0,t[8]=f+g,t[9]=d-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z(t,n,r,e,o,a,i){var u=1/(r-n),s=1/(o-e),c=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(o+e)*s,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t}function N(t,n,r,e,o){var a,i=1/Math.tan(n/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(e-o),t[10]=(o+e)*a,t[14]=2*o*e*a):(t[10]=-1,t[14]=-2*e),t}Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var j=N;function G(t,n,r,e,o){var a,i=1/Math.tan(n/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(e-o),t[10]=o*a,t[14]=o*e*a):(t[10]=-1,t[14]=-e),t}function B(t,n,r,e){var o=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(o+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(o-a)*c*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function C(t,n,r,e,o,a,i){var u=1/(n-r),s=1/(e-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+r)*u,t[13]=(o+e)*s,t[14]=(i+a)*c,t[15]=1,t}var k=C;function H(t,n,r,e,o,a,i){var u=1/(n-r),s=1/(e-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(n+r)*u,t[13]=(o+e)*s,t[14]=a*c,t[15]=1,t}function V(t,n,r,o){var a,i,u,s,c,l,f,d,M,v,g=n[0],w=n[1],p=n[2],m=o[0],b=o[1],y=o[2],x=r[0],E=r[1],L=r[2];return Math.abs(g-x)<e&&Math.abs(w-E)<e&&Math.abs(p-L)<e?h(t):(f=g-x,d=w-E,M=p-L,a=b*(M*=v=1/Math.hypot(f,d,M))-y*(d*=v),i=y*(f*=v)-m*M,u=m*d-b*f,(v=Math.hypot(a,i,u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),s=d*u-M*i,c=M*a-f*u,l=f*i-d*a,(v=Math.hypot(s,c,l))?(s*=v=1/v,c*=v,l*=v):(s=0,c=0,l=0),t[0]=a,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=d,t[7]=0,t[8]=u,t[9]=l,t[10]=M,t[11]=0,t[12]=-(a*g+i*w+u*p),t[13]=-(s*g+c*w+l*p),t[14]=-(f*g+d*w+M*p),t[15]=1,t)}function Y(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=e[0],s=e[1],c=e[2],l=o-r[0],h=a-r[1],f=i-r[2],d=l*l+h*h+f*f;d>0&&(l*=d=1/Math.sqrt(d),h*=d,f*=d);var M=s*f-c*h,v=c*l-u*f,g=u*h-s*l;return(d=M*M+v*v+g*g)>0&&(M*=d=1/Math.sqrt(d),v*=d,g*=d),t[0]=M,t[1]=v,t[2]=g,t[3]=0,t[4]=h*g-f*v,t[5]=f*M-l*g,t[6]=l*v-h*M,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function W(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Q(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function Z(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function K(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function J(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function $(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function tt(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],M=t[11],v=t[12],g=t[13],w=t[14],p=t[15],m=n[0],b=n[1],y=n[2],x=n[3],E=n[4],L=n[5],S=n[6],A=n[7],P=n[8],R=n[9],I=n[10],T=n[11],_=n[12],F=n[13],D=n[14],O=n[15];return Math.abs(r-m)<=e*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(o-b)<=e*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-y)<=e*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(i-x)<=e*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-E)<=e*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-L)<=e*Math.max(1,Math.abs(s),Math.abs(L))&&Math.abs(c-S)<=e*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-A)<=e*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-P)<=e*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(f-R)<=e*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(d-I)<=e*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(M-T)<=e*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(v-_)<=e*Math.max(1,Math.abs(v),Math.abs(_))&&Math.abs(g-F)<=e*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(w-D)<=e*Math.max(1,Math.abs(w),Math.abs(D))&&Math.abs(p-O)<=e*Math.max(1,Math.abs(p),Math.abs(O))}var nt=g,rt=Z;function et(){var t=new o(3);return o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ot(t,n,r){var e=new o(3);return e[0]=t,e[1]=n,e[2]=r,e}function at(t,n){var r=n[0],e=n[1],o=n[2],a=r*r+e*e+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function it(t,n,r){var e=n[0],o=n[1],a=n[2],i=r[0],u=r[1],s=r[2];return t[0]=o*s-a*u,t[1]=a*i-e*s,t[2]=e*u-o*i,t}function ut(){var t=new o(4);return o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function st(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function ct(t,n,r){r*=.5;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function lt(t,n){var r=2*Math.acos(n[3]),o=Math.sin(r/2);return o>e?(t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o):(t[0]=1,t[1]=0,t[2]=0),r}function ht(t,n){var r=Bt(t,n);return Math.acos(2*r*r-1)}function ft(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],s=r[1],c=r[2],l=r[3];return t[0]=e*l+i*u+o*c-a*s,t[1]=o*l+i*s+a*u-e*c,t[2]=a*l+i*c+e*s-o*u,t[3]=i*l-e*u-o*s-a*c,t}function dt(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+i*u,t[1]=o*s+a*u,t[2]=a*s-o*u,t[3]=i*s-e*u,t}function Mt(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s-a*u,t[1]=o*s+i*u,t[2]=a*s+e*u,t[3]=i*s-o*u,t}function vt(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+o*u,t[1]=o*s-e*u,t[2]=a*s+i*u,t[3]=i*s-a*u,t}function gt(t,n){var r=n[0],e=n[1],o=n[2];return t[0]=r,t[1]=e,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-o*o)),t}function wt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=Math.sqrt(r*r+e*e+o*o),u=Math.exp(a),s=i>0?u*Math.sin(i)/i:0;return t[0]=r*s,t[1]=e*s,t[2]=o*s,t[3]=u*Math.cos(i),t}function pt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=Math.sqrt(r*r+e*e+o*o),u=i>0?Math.atan2(i,a)/i:0;return t[0]=r*u,t[1]=e*u,t[2]=o*u,t[3]=.5*Math.log(r*r+e*e+o*o+a*a),t}function mt(t,n,r){return pt(t,n),Gt(t,t,r),wt(t,t),t}function bt(t,n,r,o){var a,i,u,s,c,l=n[0],h=n[1],f=n[2],d=n[3],M=r[0],v=r[1],g=r[2],w=r[3];return(i=l*M+h*v+f*g+d*w)<0&&(i=-i,M=-M,v=-v,g=-g,w=-w),1-i>e?(a=Math.acos(i),u=Math.sin(a),s=Math.sin((1-o)*a)/u,c=Math.sin(o*a)/u):(s=1-o,c=o),t[0]=s*l+c*M,t[1]=s*h+c*v,t[2]=s*f+c*g,t[3]=s*d+c*w,t}function yt(t){var n=a(),r=a(),e=a(),o=Math.sqrt(1-n),i=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=i*Math.sin(2*Math.PI*e),t[3]=i*Math.cos(2*Math.PI*e),t}function xt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*r+e*e+o*o+a*a,u=i?1/i:0;return t[0]=-r*u,t[1]=-e*u,t[2]=-o*u,t[3]=a*u,t}function Et(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Lt(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(n[3*o+o]-n[3*a+a]-n[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(n[3*a+i]-n[3*i+a])*r,t[a]=(n[3*a+o]+n[3*o+a])*r,t[i]=(n[3*i+o]+n[3*o+i])*r}return t}function St(t,n,r,e){var o=.5*Math.PI/180;n*=o,r*=o,e*=o;var a=Math.sin(n),i=Math.cos(n),u=Math.sin(r),s=Math.cos(r),c=Math.sin(e),l=Math.cos(e);return t[0]=a*s*l-i*u*c,t[1]=i*u*l+a*s*c,t[2]=i*s*c-a*u*l,t[3]=i*s*l+a*u*c,t}function At(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}et(),function(){var t;t=new o(4),o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var Pt,Rt,It,Tt,_t,Ft,Dt,Ot=function(t){var n=new o(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},Ut=function(t,n,r,e){var a=new o(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a},qt=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},zt=function(t,n,r,e,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t},Nt=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},jt=ft,Gt=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},Bt=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},Ct=function(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=n[3];return t[0]=o+e*(r[0]-o),t[1]=a+e*(r[1]-a),t[2]=i+e*(r[2]-i),t[3]=u+e*(r[3]-u),t},kt=function(t){var n=t[0],r=t[1],e=t[2],o=t[3];return Math.hypot(n,r,e,o)},Ht=kt,Vt=function(t){var n=t[0],r=t[1],e=t[2],o=t[3];return n*n+r*r+e*e+o*o},Yt=Vt,Wt=function(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*r+e*e+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=e*i,t[2]=o*i,t[3]=a*i,t},Xt=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},Qt=function(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=n[0],s=n[1],c=n[2],l=n[3];return Math.abs(r-u)<=e*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=e*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-c)<=e*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=e*Math.max(1,Math.abs(i),Math.abs(l))},Zt=(Pt=et(),Rt=ot(1,0,0),It=ot(0,1,0),function(t,n,r){var e=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}(n,r);return e<-.999999?(it(Pt,Rt,n),function(t){var n=t[0],r=t[1],e=t[2];return Math.hypot(n,r,e)}(Pt)<1e-6&&it(Pt,It,n),at(Pt,Pt),ct(t,Pt,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(it(Pt,n,r),t[0]=Pt[0],t[1]=Pt[1],t[2]=Pt[2],t[3]=1+e,Wt(t,t))}),Kt=(Tt=ut(),_t=ut(),function(t,n,r,e,o,a){return bt(Tt,n,o,a),bt(_t,r,e,a),bt(t,Tt,_t,2*a*(1-a)),t}),Jt=(Ft=new o(9),o!=Float32Array&&(Ft[1]=0,Ft[2]=0,Ft[3]=0,Ft[5]=0,Ft[6]=0,Ft[7]=0),Ft[0]=1,Ft[4]=1,Ft[8]=1,Dt=Ft,function(t,n,r,e){return Dt[0]=r[0],Dt[3]=r[1],Dt[6]=r[2],Dt[1]=e[0],Dt[4]=e[1],Dt[7]=e[2],Dt[2]=-n[0],Dt[5]=-n[1],Dt[8]=-n[2],Wt(t,Lt(t,Dt))});function $t(t,n,r){var e=t.createShader(n);if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS)){var o=n===t.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER";return console.error("An error occurred compiling the ".concat(o,": ").concat(t.getShaderInfoLog(e))),console.error("Shader source that failed to compile:\n".concat(r)),t.deleteShader(e),null}return e}function tn(t,n,r){var e=$t(t,t.VERTEX_SHADER,n),o=$t(t,t.FRAGMENT_SHADER,r),a=t.createProgram();return t.attachShader(a,e),t.attachShader(a,o),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)?a:(console.error("Unable to initialize the shader program: "+t.getProgramInfoLog(a)),null)}var nn="\n    attribute vec3 aVertexPosition;\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    void main(void) {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n    }\n",rn="\n    precision mediump float;\n    uniform vec4 uColor; // Add this uniform for dynamic color control\n\n    void main(void) {\n        gl_FragColor = uColor; // Use the uniform color\n    }\n";function en(t){if(!t)return console.error("WebGL context is not available."),null;var n=t.createBuffer();if(!n)return console.error("Failed to create a position buffer."),null;t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),t.STATIC_DRAW);var r=t.createBuffer();if(!r)return console.error("Failed to create an index buffer."),null;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r);var e=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.STATIC_DRAW);var o=[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7,8,9,9,10,10,11,11,8,12,13,13,14,14,15,15,12,16,17,17,18,18,19,19,16,20,21,21,22,22,23,23,20],a=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),{position:n,indices:r,edgeIndices:a,indexCount:e.length,edgeCount:o.length/2}}function on(t,n,r,e){if(t){t.useProgram(n.program);var o=45*Math.PI/180,a=t.canvas.clientWidth/t.canvas.clientHeight,u=i();j(u,o,a,.1,100);var s=i();w(s,s,[0,0,-6]),g(s,s,e),t.clearColor(.5,.5,.5,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.bindBuffer(t.ARRAY_BUFFER,r.position),t.vertexAttribPointer(n.attribLocations.vertexPosition,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n.attribLocations.vertexPosition),t.uniformMatrix4fv(n.uniformLocations.projectionMatrix,!1,u),t.uniformMatrix4fv(n.uniformLocations.modelViewMatrix,!1,s),t.uniform4f(n.uniformLocations.uColor,0,0,0,1),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices),t.drawElements(t.TRIANGLES,r.indexCount,t.UNSIGNED_SHORT,0),t.drawElements(t.LINES,r.edgeCount,t.UNSIGNED_SHORT,0)}else console.error("WebGL context is not available.")}var an=function(t){return console.log("toRadians called with:",t),t*Math.PI/180},un={isDragging:!1,previousMousePosition:{x:0,y:0},axis:[0,1,0],angle:0,handleMouseDown:function(t){this.isDragging=!0,this.previousMousePosition={x:t.clientX/window.innerWidth*2-1,y:-t.clientY/window.innerHeight*2+1},console.log("MouseDown Event Triggered",this.previousMousePosition)},handleMouseUp:function(t){this.isDragging&&(this.isDragging=!1,console.log("MouseUp Event Triggered",{isDragging:this.isDragging}),console.log("Updating global axis/angle:",this.axis,this.angle),window.webGLInteraction.axis=this.axis,window.webGLInteraction.angle=this.angle)},handleMouseMove:function(t){if(console.log("Mouse Move Detected"),this.isDragging){console.log("MouseMove with drag detected");var n={x:t.clientX/window.innerWidth*2-1,y:-t.clientY/window.innerHeight*2+1};console.log("Current mouse position:",n);var r,e,o=this.mapToSphere(this.previousMousePosition.x,this.previousMousePosition.y),a=this.mapToSphere(n.x,n.y);console.log("Mapping to sphere:",o,a),this.axis=(r=o,e=a,console.log("vecCross called with:",r,e),{x:r.y*e.z-r.z*e.y,y:r.z*e.x-r.x*e.z,z:r.x*e.y-r.y*e.x}),this.angle=Math.acos(Math.min(1,function(t,n){return console.log("vecDot called with:",t,n),t.x*n.x+t.y*n.y+t.z*n.z}(o,a))),console.log("MouseMove Event Triggered",{axis:this.axis,angle:this.angle}),"function"==typeof window.updateScene&&(console.log("Calling updateScene"),window.updateScene())}else console.log("MouseMove without drag detected")},mapToSphere:function(t,n){console.log("Mapping to sphere with:",t,n);var r={x:t,y:n,z:0},e=t*t+n*n;return e<=1?r.z=Math.sqrt(1-e):r=function(t){console.log("vecNormalize called with:",t);var n=function(t){return console.log("vecLength called with:",t),Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}(t);return 0===n?(console.log("Preventing division by zero for vector normalization."),{x:0,y:0,z:0}):{x:t.x/n,y:t.y/n,z:t.z/n}}(r),console.log("Mapped point:",r),r},setupInteractionHandlers:function(t){t.addEventListener("mousedown",this.handleMouseDown.bind(this),!1),t.addEventListener("mousemove",this.handleMouseMove.bind(this),!1),t.addEventListener("mouseup",this.handleMouseUp.bind(this),!1),t.addEventListener("mouseleave",this.handleMouseUp.bind(this),!1),console.log("Event handlers attached to canvas.")}};function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function cn(){cn=function(){return n};var t,n={},r=Object.prototype,e=r.hasOwnProperty,o=Object.defineProperty||function(t,n,r){t[n]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{c({},"")}catch(t){c=function(t,n,r){return t[n]=r}}function l(t,n,r,e){var a=n&&n.prototype instanceof w?n:w,i=Object.create(a.prototype),u=new T(e||[]);return o(i,"_invoke",{value:A(t,r,u)}),i}function h(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=l;var f="suspendedStart",d="suspendedYield",M="executing",v="completed",g={};function w(){}function p(){}function m(){}var b={};c(b,i,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(_([])));x&&x!==r&&e.call(x,i)&&(b=x);var E=m.prototype=w.prototype=Object.create(b);function L(t){["next","throw","return"].forEach((function(n){c(t,n,(function(t){return this._invoke(n,t)}))}))}function S(t,n){function r(o,a,i,u){var s=h(t[o],t,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==sn(l)&&e.call(l,"__await")?n.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):n.resolve(l).then((function(t){c.value=t,i(c)}),(function(t){return r("throw",t,i,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,e){function o(){return new n((function(n,o){r(t,e,n,o)}))}return a=a?a.then(o,o):o()}})}function A(n,r,e){var o=f;return function(a,i){if(o===M)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(e.method=a,e.arg=i;;){var u=e.delegate;if(u){var s=P(u,e);if(s){if(s===g)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(o===f)throw o=v,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);o=M;var c=h(n,r,e);if("normal"===c.type){if(o=e.done?v:d,c.arg===g)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(o=v,e.method="throw",e.arg=c.arg)}}}function P(n,r){var e=r.method,o=n.iterator[e];if(o===t)return r.delegate=null,"throw"===e&&n.iterator.return&&(r.method="return",r.arg=t,P(n,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),g;var a=h(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[n.resultName]=i.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function R(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function I(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function _(n){if(n||""===n){var r=n[i];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,a=function r(){for(;++o<n.length;)if(e.call(n,o))return r.value=n[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(sn(n)+" is not iterable")}return p.prototype=m,o(E,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},L(S.prototype),c(S.prototype,u,(function(){return this})),n.AsyncIterator=S,n.async=function(t,r,e,o,a){void 0===a&&(a=Promise);var i=new S(l(t,r,e,o),a);return n.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(E),c(E,s,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),r=[];for(var e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},n.values=_,T.prototype={constructor:T,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!n)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function o(e,o){return u.type="throw",u.arg=n,r.next=e,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=e.call(i,"catchLoc"),c=e.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),g},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var o=e.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,r,e){return this.delegate={iterator:_(n),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=t),g}},n}function ln(t,n,r,e,o,a,i){try{var u=t[a](i),s=u.value}catch(t){return void r(t)}u.done?n(s):Promise.resolve(s).then(e,o)}function hn(){return fn.apply(this,arguments)}function fn(){var t;return t=cn().mark((function t(){var n,r,e;return cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Starting main function."),n=document.getElementById("webgl-canvas"),r=n.getContext("webgl")){t.next=8;break}return console.error("Unable to initialize WebGL."),t.abrupt("return");case 8:console.log("WebGL context initialized.");case 9:return window.gl=r,window.rotationMatrix=i(),window.loadShader=$t,window.initShaderProgram=tn,window.initBuffers=en,window.drawScene=on,window.toRadians=an,window.webGLInteraction=un,window.vsSource=nn,window.fsSource=rn,window.rotationAngles={x:0,y:0,z:0},window.lastRotationAngles={x:0,y:0,z:0},console.log("Initializing shader program."),t.next=24,window.initShaderProgram(r,window.vsSource,window.fsSource);case 24:if(e=t.sent){t.next=30;break}return console.error("Initializing shader program failed."),t.abrupt("return");case 30:console.log("Shader program initialized successfully.");case 31:return window.shaderProgram=e,console.log("Shader program:",window.shaderProgram),window.programInfo={program:e,attribLocations:{vertexPosition:r.getAttribLocation(e,"aVertexPosition")},uniformLocations:{projectionMatrix:r.getUniformLocation(e,"uProjectionMatrix"),modelViewMatrix:r.getUniformLocation(e,"uModelViewMatrix"),uColor:r.getUniformLocation(e,"uColor")}},console.log("Attribute and Uniform Locations:",window.programInfo.attribLocations,window.programInfo.uniformLocations),console.log("Initializing buffers."),t.next=38,window.initBuffers(r);case 38:if(window.buffers=t.sent,window.buffers){t.next=44;break}return console.error("Initializing buffers failed."),t.abrupt("return");case 44:console.log("Buffers initialized successfully.");case 45:console.log("Setting up interaction handlers."),un.setupInteractionHandlers(n),window.projectionMatrix=i(),j(window.projectionMatrix,45*Math.PI/180,r.canvas.clientWidth/r.canvas.clientHeight,.1,100),window.renderLoop=function(){console.log("Render loop tick."),window.drawScene(window.gl,window.programInfo,window.buffers,window.rotationMatrix),requestAnimationFrame(window.renderLoop)},window.drawScene(window.gl,window.programInfo,window.buffers,window.rotationAngles),console.log("Initial scene rendered."),console.log("Starting render loop."),window.renderLoop();case 54:case"end":return t.stop()}}),t)})),fn=function(){var n=this,r=arguments;return new Promise((function(e,o){var a=t.apply(n,r);function i(t){ln(a,e,o,i,u,"next",t)}function u(t){ln(a,e,o,i,u,"throw",t)}i(void 0)}))},fn.apply(this,arguments)}window.updateScene=function(){if(console.log("Starting updateScene"),window.webGLInteraction&&void 0!==window.webGLInteraction.axis&&void 0!==window.webGLInteraction.angle){var t=et();at(t,window.webGLInteraction.axis);var n=ut();ct(n,t,window.webGLInteraction.angle),console.log("Quaternion before setAxisAngle:",ut()),console.log("Quaternion after setAxisAngle:",n);var r=i();if(q(r,n),console.log("Rotation matrix from quaternion (test):",r),r.some(isNaN))return void console.error("Rotation matrix contains NaN values. Aborting scene update.");s(window.rotationMatrix,r),console.log("Updated global rotationMatrix:",window.rotationMatrix),window.drawScene(window.gl,window.programInfo,window.buffers,window.rotationMatrix)}},document.addEventListener("DOMContentLoaded",(function(){console.log("Document loaded. Starting main function."),window.main=hn,window.main()})),window.mat4=n,window.quat=r})();
//# sourceMappingURL=bundle.js.map